<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
</head>
<body class="bg-gray-50">
<!-- Demo Controls (remove in production) -->
<div class="mb-8 p-4 bg-gray-100 rounded-lg max-w-7xl mx-auto mt-4">
    <h3 class="text-sm font-medium text-gray-700 mb-3">Demo Controls (for testing):</h3>
    <div class="flex flex-wrap gap-2">
        <button onclick="showView('no-login')" class="px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200">
            Not Logged In
        </button>
        <button onclick="showView('no-customer')" class="px-3 py-1 text-xs bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200">
            No Customer Account
        </button>
        <button onclick="showView('has-customer')" class="px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200">
            Has Customer Account
        </button>
        <button onclick="showView('admin')" class="px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200">
            Admin View
        </button>
    </div>
</div>

<!-- Not Logged In View -->
<div id="no-login-view" class="view-container hidden">
    <div class="min-h-screen bg-gray-50 flex items-center justify-center">
        <div class="text-center">
            <h1 class="text-2xl font-bold text-gray-900 mb-4">Please Log In</h1>
            <p class="text-gray-600">You need to be logged in to access customer management.</p>
            <a href="/login" class="inline-block mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                Go to Login
            </a>
        </div>
    </div>
</div>

<!-- No Customer Account View -->
<div id="no-customer-view" class="view-container">
    <div class="min-h-screen bg-gray-50 py-12">
        <div class="max-w-md mx-auto text-center">
            <div class="bg-white rounded-lg shadow-md p-8">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i data-lucide="user" class="w-8 h-8 text-blue-600"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Create Customer Account</h2>
                <p class="text-gray-600 mb-8">
                    You don't have a customer account yet. Create one to start making purchases, track your orders, and manage your profile.
                </p>
                <form action="/customer/create" method="get">
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-200 flex items-center justify-center gap-2">
                        <i data-lucide="plus" class="w-5 h-5"></i>
                        Create Customer Account
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- User Customer Account View -->
<div id="has-customer-view" class="view-container hidden">
    <div class="min-h-screen bg-gray-50 py-8">
        <div class="max-w-4xl mx-auto px-4">
            <div class="bg-white rounded-lg shadow-md">
                <div class="px-6 py-4 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h1 class="text-2xl font-bold text-gray-900">My Customer Account</h1>
                        <div class="flex gap-2">
                            <a href="/customer/edit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200 flex items-center gap-2">
                                <i data-lucide="edit" class="w-4 h-4"></i>
                                Edit
                            </a>
                            <form action="/customer/delete" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete your customer account?')">
                                <input type="hidden" name="_method" value="delete">
                                <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200 flex items-center gap-2">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                    Delete
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="p-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Personal Information</h3>
                                <div class="space-y-3">
                                    <div class="flex items-center gap-3">
                                        <i data-lucide="user" class="w-5 h-5 text-gray-400"></i>
                                        <span class="text-gray-900" th:text="${customer.name}">John Doe</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <i data-lucide="mail" class="w-5 h-5 text-gray-400"></i>
                                        <span class="text-gray-900" th:text="${customer.email}">john.doe@email.com</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <i data-lucide="phone" class="w-5 h-5 text-gray-400"></i>
                                        <span class="text-gray-900" th:text="${customer.phone}">+1 (555) 123-4567</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <i data-lucide="map-pin" class="w-5 h-5 text-gray-400"></i>
                                        <span class="text-gray-900" th:text="${customer.address}">123 Main St, New York, NY 10001</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Account Statistics</h3>
                            <div class="space-y-4">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <div class="text-sm text-gray-600">Member Since</div>
                                    <div class="text-lg font-semibold text-gray-900" th:text="${#dates.format(customer.joinDate, 'MMM dd, yyyy')}">
                                        Jan 15, 2024
                                    </div>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <div class="text-sm text-gray-600">Total Orders</div>
                                    <div class="text-lg font-semibold text-gray-900" th:text="${customer.totalOrders}">12</div>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <div class="text-sm text-gray-600">Total Spent</div>
                                    <div class="text-lg font-semibold text-gray-900" th:text="'$' + ${#numbers.formatDecimal(customer.totalSpent, 1, 2)}">
                                        $2,450.00
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Admin View -->
<div id="admin-view" class="view-container hidden">
    <div class="min-h-screen bg-gray-50 py-8">
        <div class="max-w-7xl mx-auto px-4">
            <div class="bg-white rounded-lg shadow-md">
                <div class="px-6 py-4 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <i data-lucide="shield" class="w-6 h-6 text-blue-600"></i>
                            <h1 class="text-2xl font-bold text-gray-900">Customer Management</h1>
                        </div>
                        <a href="/admin/customer/create" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200 flex items-center gap-2">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            Add Customer
                        </a>
                    </div>
                    <p class="text-gray-600 mt-1">Manage all customer accounts</p>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Customer
                            </th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Contact
                            </th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Statistics
                            </th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Actions
                            </th>
                        </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                        <!-- Sample rows for demo - replace with th:each in real implementation -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div>
                                    <div class="text-sm font-medium text-gray-900">John Doe</div>
                                    <div class="text-sm text-gray-500">ID: 1</div>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">john.doe@email.com</div>
                                <div class="text-sm text-gray-500">+1 (555) 123-4567</div>
                                <div class="text-sm text-gray-500">123 Main St, New York, NY 10001</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">12 orders</div>
                                <div class="text-sm text-gray-500">$2,450.00 spent</div>
                                <div class="text-sm text-gray-500">Since Jan 15, 2024</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex gap-2">
                                    <a href="/admin/customer/edit/1" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition duration-200 flex items-center gap-1">
                                        <i data-lucide="edit" class="w-3 h-3"></i>
                                        Edit
                                    </a>
                                    <form action="/admin/customer/delete/1" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this customer?')">
                                        <input type="hidden" name="_method" value="delete">
                                        <button type="submit" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition duration-200 flex items-center gap-1">
                                            <i data-lucide="trash-2" class="w-3 h-3"></i>
                                            Delete
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div>
                                    <div class="text-sm font-medium text-gray-900">Jane Smith</div>
                                    <div class="text-sm text-gray-500">ID: 2</div>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">jane.smith@email.com</div>
                                <div class="text-sm text-gray-500">+1 (555) 987-6543</div>
                                <div class="text-sm text-gray-500">456 Oak Ave, Los Angeles, CA 90210</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">8 orders</div>
                                <div class="text-sm text-gray-500">$1,890.50 spent</div>
                                <div class="text-sm text-gray-500">Since Feb 20, 2024</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex gap-2">
                                    <a href="/admin/customer/edit/2" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition duration-200 flex items-center gap-1">
                                        <i data-lucide="edit" class="w-3 h-3"></i>
                                        Edit
                                    </a>
                                    <form action="/admin/customer/delete/2" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this customer?')">
                                        <input type="hidden" name="_method" value="delete">
                                        <button type="submit" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition duration-200 flex items-center gap-1">
                                            <i data-lucide="trash-2" class="w-3 h-3"></i>
                                            Delete
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div>
                                    <div class="text-sm font-medium text-gray-900">Mike Johnson</div>
                                    <div class="text-sm text-gray-500">ID: 3</div>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">mike.johnson@email.com</div>
                                <div class="text-sm text-gray-500">+1 (555) 456-7890</div>
                                <div class="text-sm text-gray-500">789 Pine Rd, Chicago, IL 60601</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">15 orders</div>
                                <div class="text-sm text-gray-500">$3,200.75 spent</div>
                                <div class="text-sm text-gray-500">Since Mar 10, 2024</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex gap-2">
                                    <a href="/admin/customer/edit/3" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition duration-200 flex items-center gap-1">
                                        <i data-lucide="edit" class="w-3 h-3"></i>
                                        Edit
                                    </a>
                                    <form action="/admin/customer/delete/3" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this customer?')">
                                        <input type="hidden" name="_method" value="delete">
                                        <button type="submit" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition duration-200 flex items-center gap-1">
                                            <i data-lucide="trash-2" class="w-3 h-3"></i>
                                            Delete
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        <!-- In real implementation, use:
                        <tr th:each="customer : ${customers}" class="hover:bg-gray-50">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div>
                                    <div class="text-sm font-medium text-gray-900" th:text="${customer.name}"></div>
                                    <div class="text-sm text-gray-500" th:text="'ID: ' + ${customer.id}"></div>
                                </div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900" th:text="${customer.email}"></div>
                                <div class="text-sm text-gray-500" th:text="${customer.phone}"></div>
                                <div class="text-sm text-gray-500" th:text="${customer.address}"></div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900" th:text="${customer.totalOrders} + ' orders'"></div>
                                <div class="text-sm text-gray-500" th:text="'$' + ${#numbers.formatDecimal(customer.totalSpent, 1, 2)} + ' spent'"></div>
                                <div class="text-sm text-gray-500" th:text="'Since ' + ${#dates.format(customer.joinDate, 'MMM dd, yyyy')}"></div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex gap-2">
                                    <a th:href="@{/admin/customer/edit/{id}(id=${customer.id})}" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition duration-200 flex items-center gap-1">
                                        <i data-lucide="edit" class="w-3 h-3"></i>
                                        Edit
                                    </a>
                                    <form th:action="@{/admin/customer/delete/{id}(id=${customer.id})}" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this customer?')">
                                        <input type="hidden" name="_method" value="delete">
                                        <button type="submit" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition duration-200 flex items-center gap-1">
                                            <i data-lucide="trash-2" class="w-3 h-3"></i>
                                            Delete
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Demo function to show different views
    function showView(viewType) {
        // Hide all views
        document.querySelectorAll('.view-container').forEach(view => {
            view.classList.add('hidden');
        });

        // Show selected view
        const viewId = viewType + '-view';
        document.getElementById(viewId).classList.remove('hidden');
    }

    // Show default view on load
    showView('no-customer');
</script>
</body>
</html>